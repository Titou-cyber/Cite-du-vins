<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expérience de Dégustation Virtuelle - Cité du Vin</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Virtual Tasting Experience specific styles */
        .tasting-scene {
            position: relative;
            width: 100%;
            height: 70vh;
            min-height: 500px;
            background-color: #f5f5f5;
            border-radius: var(--border-radius-large);
            overflow: hidden;
            margin-bottom: 2rem;
        }
        
        .tasting-canvas {
            width: 100%;
            height: 100%;
        }
        
        .tasting-controls {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            background: linear-gradient(to top, rgba(0,0,0,0.8), rgba(0,0,0,0));
            padding: 2rem 1rem 1rem;
            display: flex;
            justify-content: center;
            gap: 1rem;
        }
        
        .tasting-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.5rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            transition: all 0.3s;
        }
        
        .tasting-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }
        
        .tasting-btn:active {
            transform: translateY(0);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
        
        .tasting-action-panel {
            position: absolute;
            top: 0;
            right: 0;
            width: 30%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 2rem;
            transform: translateX(100%);
            transition: transform 0.5s ease-in-out;
            overflow-y: auto;
        }
        
        .tasting-action-panel.show {
            transform: translateX(0);
        }
        
        .wine-selector {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 0.5rem;
            z-index: 10;
        }
        
        .wine-option {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid white;
            transition: all 0.3s;
        }
        
        .wine-option:hover, .wine-option.active {
            transform: scale(1.2);
            box-shadow: 0 0 15px rgba(255,255,255,0.8);
        }
        
        .wine-red {
            background: linear-gradient(to bottom, #8B0000, #5a0000);
        }
        
        .wine-white {
            background: linear-gradient(to bottom, #F4E992, #E8D568);
        }
        
        .wine-rose {
            background: linear-gradient(to bottom, #FAA0A0, #E4717A);
        }
        
        .wine-sparkling {
            background: linear-gradient(to bottom, #F8F4E1, #E0D7C3);
        }
        
        .tasting-note {
            position: absolute;
            background-color: white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: all 0.3s;
            font-size: 0.9rem;
            color: var(--primary-color);
            opacity: 0;
            animation: pulse 2s infinite;
        }
        
        .tasting-note:hover {
            transform: scale(1.2);
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(139, 0, 0, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(139, 0, 0, 0); }
            100% { box-shadow: 0 0 0 0 rgba(139, 0, 0, 0); }
        }
        
        .tasting-note-tooltip {
            position: absolute;
            background-color: white;
            border-radius: var(--border-radius);
            padding: 1rem;
            box-shadow: var(--shadow-large);
            max-width: 250px;
            z-index: 100;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .tasting-note-tooltip h4 {
            margin-bottom: 0.5rem;
            color: var(--primary-color);
        }
        
        .tasting-stages {
            display: flex;
            justify-content: space-between;
            margin-bottom: 2rem;
        }
        
        .tasting-stage {
            text-align: center;
            flex: 1;
            padding: 1rem;
            border-bottom: 3px solid var(--border-color);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .tasting-stage.active {
            border-color: var(--primary-color);
            color: var(--primary-color);
        }
        
        .tasting-stage-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }
        
        .wine-info-card {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
            margin-bottom: 1.5rem;
        }
        
        .wine-info-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .wine-info-color {
            width: 40px;
            height: 60px;
            border-radius: var(--border-radius);
        }
        
        .wine-attributes {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .wine-attribute {
            background-color: var(--gray-light);
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-size: 0.9rem;
        }
        
        .aroma-palette {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1.5rem;
        }
        
        .aroma-tag {
            padding: 0.25rem 0.75rem;
            border-radius: 50px;
            font-size: 0.9rem;
            background-color: rgba(var(--intensity, 100%), 0.2);
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .aroma-tag:hover {
            transform: scale(1.05);
        }
        
        .aroma-item-fruits { background-color: rgba(229, 115, 115, var(--intensity, 0.2)); }
        .aroma-item-floral { background-color: rgba(79, 195, 247, var(--intensity, 0.2)); }
        .aroma-item-spice { background-color: rgba(149, 117, 205, var(--intensity, 0.2)); }
        .aroma-item-oak { background-color: rgba(161, 136, 127, var(--intensity, 0.2)); }
        .aroma-item-herbal { background-color: rgba(174, 213, 129, var(--intensity, 0.2)); }
        
        .wine-tasting-note {
            font-style: italic;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-color);
        }
        
        .interactive-tasting-form {
            margin-top: 2rem;
        }
        
        .tasting-form-title {
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .tasting-slider {
            margin-bottom: 1.5rem;
        }
        
        .tasting-slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }
        
        .tasting-slider-label span {
            font-size: 0.9rem;
            color: var(--text-light);
        }
        
        .tasting-comparison {
            margin-top: 2rem;
        }
        
        .comparison-charts {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .comparison-chart {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
        }
        
        .radar-chart-container {
            height: 300px;
        }
        
        .share-tasting-section {
            margin-top: 2rem;
            text-align: center;
        }
        
        .tasting-certificate {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 2rem;
            margin-bottom: 1.5rem;
            position: relative;
            overflow: hidden;
        }
        
        .tasting-certificate::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 10px;
            background: var(--primary-color);
        }
        
        .certificate-header {
            text-align: center;
            margin-bottom: 1.5rem;
        }
        
        .certificate-logo {
            width: 120px;
            margin-bottom: 1rem;
        }
        
        .certificate-title {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }
        
        .certificate-subtitle {
            color: var(--text-light);
        }
        
        .certificate-date {
            margin-top: 1.5rem;
        }
    </style>
</head>
<body>
     <!-- Header -->
     <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <img src="assets/images/logo.png" alt="Cité du Vin Logo" id="logo-image">
                    <h1>Cité du Vin</h1>
                </div>
                
                <!-- Search Bar -->
                <form id="search-form" class="search-form">
                    <div class="search-container">
                        <input type="text" id="search-input" placeholder="Rechercher des vins, régions, cépages...">
                        <button type="submit">
                            <i class="fas fa-search"></i> Rechercher
                        </button>
                    </div>
                </form>
                
                <!-- Header Actions -->
                <div class="header-actions">
                    <button type="button" class="cart-btn" id="cart-button">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-badge" id="cart-count">0</span>
                    </button>
                    
                    <!-- Cart Preview (Hidden by default) -->
                    <div class="cart-preview" id="cart-preview">
                        <div class="cart-preview-title">
                            <h3>Votre Panier</h3>
                            <button class="btn-link" id="cart-preview-close">Fermer</button>
                        </div>
                        <div class="cart-preview-items" id="cart-preview-items">
                            <!-- Cart items will be inserted here via JavaScript -->
                        </div>
                        <div class="cart-preview-total">
                            <span>Total:</span>
                            <span id="cart-preview-total-amount">€0.00</span>
                        </div>
                        <div class="cart-preview-actions">
                            <a href="cart.html" class="btn secondary">Voir le panier</a>
                            <a href="checkout.html" class="btn primary">Commander</a>
                        </div>
                    </div>
                    
                    <div class="user-menu">
                        <button type="button" class="user-btn" id="user-button">
                            <i class="fas fa-user-circle"></i>
                            <span>Mon Compte</span>
                        </button>
                        
                        <!-- User Dropdown (Hidden by default) -->
                        <div class="user-dropdown" id="user-dropdown">
                            <a href="account.html" class="dropdown-item">Mon profil</a>
                            <a href="orders.html" class="dropdown-item">Mes commandes</a>
                            <a href="favorites.html" class="dropdown-item">Mes favoris</a>
                            <div class="dropdown-divider"></div>
                            <a href="#" class="dropdown-item" id="logout-button">Déconnexion</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Main Navigation -->
    <nav class="main-nav">
        <div class="container">
            <div class="nav-container">
                <button class="menu-btn" id="menu-button">
                    <i class="fas fa-bars"></i>
                </button>
                
                <ul class="nav-links" id="nav-links">
                    <li class="nav-item">
                        <a href="index.html" class="nav-link active">Accueil</a>
                    </li>
                    <li class="nav-item">
                        <a href="wines.html" class="nav-link">Notre Sélection</a>
                    </li>
                    <li class="nav-item">
                        <a href="regions.html" class="nav-link">Régions Viticoles</a>
                    </li>
                    <li class="nav-item">
                        <a href="experience.html" class="nav-link">Expérience Dégustation</a>
                    </li>
                    <li class="nav-item">
                        <a href="quiz.html" class="nav-link">Quiz Œnologique</a>
                    </li>
                    <li class="nav-item">
                        <a href="blog.html" class="nav-link">Blog</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    
    <!-- Virtual Tasting Experience Page Content -->
    <main class="experience-page">
        <div class="container">
            <div class="experience-header">
                <h1 class="experience-title">Dégustation Virtuelle</h1>
                <p class="experience-subtitle">Découvrez et analysez les vins en détail grâce à notre expérience interactive</p>
            </div>
            
            <!-- Interactive 3D Tasting Scene -->
            <section class="tasting-scene">
                <canvas id="tasting-canvas" class="tasting-canvas"></canvas>
                
                <!-- Interactive hot spots will be added via JavaScript -->
                
                <!-- Wine type selector -->
                <div class="wine-selector">
                    <div class="wine-option wine-red active" data-wine="red" title="Vin Rouge"></div>
                    <div class="wine-option wine-white" data-wine="white" title="Vin Blanc"></div>
                    <div class="wine-option wine-rose" data-wine="rose" title="Vin Rosé"></div>
                    <div class="wine-option wine-sparkling" data-wine="sparkling" title="Vin Effervescent"></div>
                </div>
                
                <!-- Controls -->
                <div class="tasting-controls">
                    <button class="tasting-btn" id="visual-btn" title="Analyse Visuelle">
                        <i class="fas fa-eye"></i>
                    </button>
                    <button class="tasting-btn" id="nose-btn" title="Analyse Olfactive">
                        <i class="fas fa-nose"></i>
                    </button>
                    <button class="tasting-btn" id="taste-btn" title="Analyse Gustative">
                        <i class="fas fa-utensils"></i>
                    </button>
                    <button class="tasting-btn" id="info-btn" title="Informations sur le Vin">
                        <i class="fas fa-info"></i>
                    </button>
                    <button class="tasting-btn" id="notes-btn" title="Vos Notes de Dégustation">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>
                
                <!-- Action Panel (starts hidden) -->
                <div class="tasting-action-panel" id="action-panel">
                    <div id="panel-content">
                        <!-- Panel content will be inserted via JavaScript -->
                    </div>
                </div>
            </section>
            
            <!-- Tasting Stages Guide -->
            <section class="tasting-stages-section">
                <div class="tasting-stages">
                    <div class="tasting-stage active" data-stage="visual">
                        <div class="tasting-stage-icon">
                            <i class="fas fa-eye"></i>
                        </div>
                        <h3>Visuel</h3>
                    </div>
                    <div class="tasting-stage" data-stage="nose">
                        <div class="tasting-stage-icon">
                            <i class="fas fa-nose"></i>
                        </div>
                        <h3>Nez</h3>
                    </div>
                    <div class="tasting-stage" data-stage="taste">
                        <div class="tasting-stage-icon">
                            <i class="fas fa-utensils"></i>
                        </div>
                        <h3>Bouche</h3>
                    </div>
                    <div class="tasting-stage" data-stage="conclusion">
                        <div class="tasting-stage-icon">
                            <i class="fas fa-clipboard-check"></i>
                        </div>
                        <h3>Conclusion</h3>
                    </div>
                </div>
                
                <div class="stage-content" id="stage-content">
                    <!-- Visual Stage Content (default) -->
                    <div class="stage-panel active" id="visual-stage">
                        <div class="wine-info-card">
                            <div class="wine-info-header">
                                <div class="wine-info-color" style="background-color: #8B0000;"></div>
                                <div>
                                    <h3>Analyse Visuelle</h3>
                                    <p>Château Margaux 2015 - Bordeaux</p>
                                </div>
                            </div>
                            
                            <div class="wine-attributes">
                                <div class="wine-attribute">Rubis profond</div>
                                <div class="wine-attribute">Brillant</div>
                                <div class="wine-attribute">Larmes lentes</div>
                                <div class="wine-attribute">Viscosité élevée</div>
                            </div>
                            
                            <p>Ce vin présente une robe rubis profond avec des reflets grenat, typique d'un grand vin rouge de Bordeaux de ce millésime. Sa brillance témoigne d'une clarté parfaite. Les larmes, ou "jambes", sont lentes et nombreuses, indiquant un degré d'alcool relativement élevé et une bonne concentration.</p>
                            
                            <div class="wine-tasting-note">
                                "La couleur est d'une intensité remarquable, annonçant un vin de grande structure. Sa teinte révèle également sa jeunesse et son potentiel de garde." - Notre œnologue
                            </div>
                        </div>
                        
                        <div class="interactive-tasting-form">
                            <h3 class="tasting-form-title">
                                <i class="fas fa-edit"></i> Notez ce vin
                            </h3>
                            
                            <div class="tasting-slider">
                                <div class="tasting-slider-label">
                                    <span>Intensité de la couleur</span>
                                    <span>Profonde</span>
                                </div>
                                <input type="range" min="0" max="10" value="8" class="form-control">
                            </div>
                            
                            <div class="tasting-slider">
                                <div class="tasting-slider-label">
                                    <span>Brillance</span>
                                    <span>Éclatante</span>
                                </div>
                                <input type="range" min="0" max="10" value="9" class="form-control">
                            </div>
                            
                            <div class="tasting-slider">
                                <div class="tasting-slider-label">
                                    <span>Viscosité (jambes)</span>
                                    <span>Élevée</span>
                                </div>
                                <input type="range" min="0" max="10" value="8" class="form-control">
                            </div>
                            
                            <div class="form-group mt-3">
                                <label class="form-label">Vos observations</label>
                                <textarea class="form-control" rows="3" placeholder="Notez vos impressions visuelles..."></textarea>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Nose Stage Content (hidden by default) -->
                    <div class="stage-panel" id="nose-stage" style="display: none;">
                        <div class="wine-info-card">
                            <div class="wine-info-header">
                                <div class="wine-info-color" style="background-color: #8B0000;"></div>
                                <div>
                                    <h3>Analyse Olfactive</h3>
                                    <p>Château Margaux 2015 - Bordeaux</p>
                                </div>
                            </div>
                            
                            <div class="wine-attributes">
                                <div class="wine-attribute">Intensité élevée</div>
                                <div class="wine-attribute">Complexe</div>
                                <div class="wine-attribute">Arômes mûrs</div>
                                <div class="wine-attribute">Boisé élégant</div>
                            </div>
                            
                            <p>Au nez, ce vin se révèle d'une grande complexité aromatique. Le premier nez présente des arômes intenses de fruits noirs (cassis, mûre), évoluant vers des notes de cèdre, de tabac et d'épices douces. L'agitation révèle des nuances florales (violette) et minérales subtiles.</p>
                            
                            <h4 class="mt-3">Palette Aromatique</h4>
                            <div class="aroma-palette">
                                <span class="aroma-tag aroma-item-fruits" style="--intensity: 0.8">Cassis</span>
                                <span class="aroma-tag aroma-item-fruits" style="--intensity: 0.7">Mûre</span>
                                <span class="aroma-tag aroma-item-fruits" style="--intensity: 0.5">Cerise noire</span>
                                <span class="aroma-tag aroma-item-floral" style="--intensity: 0.6">Violette</span>
                                <span class="aroma-tag aroma-item-spice" style="--intensity: 0.4">Poivre</span>
                                <span class="aroma-tag aroma-item-oak" style="--intensity: 0.7">Cèdre</span>
                                <span class="aroma-tag aroma-item-oak" style="--intensity: 0.6">Tabac</span>
                                <span class="aroma-tag aroma-item-oak" style="--intensity: 0.5">Vanille</span>
                                <span class="aroma-tag aroma-item-herbal" style="--intensity: 0.3">Menthe</span>
                            </div>
                            
                            <div class="wine-tasting-note">
                                "Un bouquet d'une grande finesse, typique des grands Bordeaux, où l'élevage en fût apporte une complexité sans masquer le fruit. Un nez d'une remarquable élégance." - Notre œnologue
                            </div>
                        </div>
                        
                        <div class="interactive-tasting-form">
                            <h3 class="tasting-form-title">
                                <i class="fas fa-edit"></i> Notez ce vin
                            </h3>
                            
                            <div class="tasting-slider">
                                <div class="tasting-slider-label">
                                    <span>Intensité aromatique</span>
                                    <span>Prononcée</span>
                                </div>
                                <input type="range" min="0" max="10" value="8" class="form-control">
                            </div>
                            
                            <div class="tasting-slider">
                                <div class="tasting-slider-label">
                                    <span>Complexité</span>
                                    <span>Très complexe</span>
                                </div>
                                <input type="range" min="0" max="10" value="9" class="form-control">
                            </div>
                            
                            <div class="form-group mt-3">
                                <label class="form-label">Arômes identifiés</label>
                                <select class="form-control" multiple>
                                    <option>Fruits rouges</option>
                                    <option selected>Fruits noirs</option>
                                    <option>Fruits secs</option>
                                    <option selected>Floral</option>
                                    <option selected>Boisé</option>
                                    <option selected>Épices</option>
                                    <option>Végétal</option>
                                    <option>Minéral</option>
                                    <option>Animal</option>
                                </select>
                            </div>
                            
                            <div class="form-group mt-3">
                                <label class="form-label">Vos observations</label>
                                <textarea class="form-control" rows="3" placeholder="Notez vos impressions olfactives..."></textarea>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Taste Stage Content (hidden by default) -->
                    <div class="stage-panel" id="taste-stage" style="display: none;">
                        <div class="wine-info-card">
                            <div class="wine-info-header">
                                <div class="wine-info-color" style="background-color: #8B0000;"></div>
                                <div>
                                    <h3>Analyse Gustative</h3>
                                    <p>Château Margaux 2015 - Bordeaux</p>
                                </div>
                            </div>
                            
                            <div class="wine-attributes">
                                <div class="wine-attribute">Attaque soyeuse</div>
                                <div class="wine-attribute">Tanins fins</div>
                                <div class="wine-attribute">Structure puissante</div>
                                <div class="wine-attribute">Finale persistante</div>
                            </div>
                            
                            <p>En bouche, l'attaque est à la fois puissante et élégante, avec une belle fraîcheur. Le milieu de bouche révèle un vin parfaitement équilibré, aux tanins soyeux et d'une grande finesse. La structure est impressionnante, portée par une acidité parfaitement intégrée. La finale est remarquablement longue, laissant des notes de fruits noirs, d'épices et de cèdre.</p>
                            
                            <div class="wine-tasting-note">
                                "Un vin d'une harmonie remarquable, alliant puissance et élégance. Les tanins, bien que présents, sont d'une finesse exceptionnelle. Un grand vin de garde qui exprime parfaitement son terroir." - Notre œnologue
                            </div>
                        </div>
                        
                        <div class="interactive-tasting-form">
                            <h3 class="tasting-form-title">
                                <i class="fas fa-edit"></i> Notez ce vin
                            </h3>
                            
                            <div class="tasting-slider">
                                <div class="tasting-slider-label">
                                    <span>Douceur</span>
                                    <span>Sec</span>
                                </div>
                                <input type="range" min="0" max="10" value="1" class="form-control">
                            </div>
                            
                            <div class="tasting-slider">
                                <div class="tasting-slider-label">
                                    <span>Acidité</span>
                                    <span>Bien équilibrée</span>
                                </div>
                                <input type="range" min="0" max="10" value="6" class="form-control">
                            </div>
                            
                            <div class="tasting-slider">
                                <div class="tasting-slider-label">
                                    <span>Tanins</span>
                                    <span>Fins et soyeux</span>
                                </div>
                                <input type="range" min="0" max="10" value="7" class="form-control">
                            </div>
                            
                            <div class="tasting-slider">
                                <div class="tasting-slider-label">
                                    <span>Corps</span>
                                    <span>Puissant</span>
                                </div>
                                <input type="range" min="0" max="10" value="8" class="form-control">
                            </div>
                            
                            <div class="tasting-slider">
                                <div class="tasting-slider-label">
                                    <span>Longueur en bouche</span>
                                    <span>Très longue</span>
                                </div>
                                <input type="range" min="0" max="10" value="9" class="form-control">
                            </div>
                            
                            <div class="form-group mt-3">
                                <label class="form-label">Vos observations</label>
                                <textarea class="form-control" rows="3" placeholder="Notez vos impressions gustatives..."></textarea>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Conclusion Stage Content (hidden by default) -->
                    <div class="stage-panel" id="conclusion-stage" style="display: none;">
                        <div class="wine-info-card">
                            <div class="wine-info-header">
                                <div class="wine-info-color" style="background-color: #8B0000;"></div>
                                <div>
                                    <h3>Conclusion</h3>
                                    <p>Château Margaux 2015 - Bordeaux</p>
                                </div>
                            </div>
                            
                            <div class="wine-attributes">
                                <div class="wine-attribute">98/100</div>
                                <div class="wine-attribute">Excellence</div>
                                <div class="wine-attribute">Garde: 15-25 ans</div>
                                <div class="wine-attribute">Apogée: 2030-2035</div>
                            </div>
                            
                            <p>Ce Château Margaux 2015 est un vin d'exception qui illustre parfaitement la grandeur de ce Premier Cru Classé de Bordeaux. Il combine avec brio puissance, élégance et finesse, dans un millésime particulièrement réussi.</p>
                            
                            <p>Sa structure lui assure un excellent potentiel de garde, avec une apogée estimée entre 2030 et 2035, mais il offre déjà un grand plaisir en dégustation aujourd'hui.</p>
                            
                            <div class="wine-tasting-note">
                                "Un vin monumental qui incarne l'excellence du terroir de Margaux. Équilibre parfait entre puissance et élégance, c'est une référence absolue." - Notre œnologue
                            </div>
                        </div>
                        
                        <div class="tasting-comparison">
                            <h3 class="mb-3">Votre Évaluation vs Notre Œnologue</h3>
                            
                            <div class="comparison-charts">
                                <div class="comparison-chart">
                                    <h4>Profil Aromatique</h4>
                                    <div class="radar-chart-container" id="aroma-radar-chart">
                                        <!-- Radar chart will be inserted via JavaScript -->
                                    </div>
                                </div>
                                
                                <div class="comparison-chart">
                                    <h4>Structure et Équilibre</h4>
                                    <div class="radar-chart-container" id="structure-radar-chart">
                                        <!-- Radar chart will be inserted via JavaScript -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="share-tasting-section">
                            <h3 class="mb-3">Partagez Votre Dégustation</h3>
                            
                            <div class="tasting-certificate">
                                <div class="certificate-header">
                                    <img src="assets/images/logo.png" alt="Cité du Vin Logo" class="certificate-logo">
                                    <h2 class="certificate-title">Certificat de Dégustation</h2>
                                    <p class="certificate-subtitle">Cité du Vin - Expérience de Dégustation Virtuelle</p>
                                </div>
                                
                                <p>Ce certificat atteste que</p>
                                <h3>Jean Dupont</h3>
                                <p>a complété la dégustation virtuelle du</p>
                                <h3>Château Margaux 2015</h3>
                                <p>Grand Cru Classé de Bordeaux</p>
                                
                                <div class="certificate-date">
                                    <p>Bordeaux, le 25 Mars 2025</p>
                                </div>
                            </div>
                            
                            <div class="social-sharing">
                                <button class="btn outline share-btn" data-platform="facebook">
                                    <i class="fab fa-facebook-f"></i> Partager sur Facebook
                                </button>
                                <button class="btn outline share-btn" data-platform="twitter">
                                    <i class="fab fa-twitter"></i> Partager sur Twitter
                                </button>
                                <button class="btn outline share-btn" data-platform="linkedin">
                                    <i class="fab fa-linkedin-in"></i> Partager sur LinkedIn
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Suggested Wine Pairings -->
            <section class="pairings-section">
                <h2 class="section-title">Accords Mets & Vins Suggérés</h2>
                
                <div class="pairing-grid">
                    <div class="pairing-card">
                        <div class="pairing-image">
                            <img src="assets/images/pairing-beef.jpg" alt="Filet de Boeuf">
                        </div>
                        <div class="pairing-content">
                            <h3 class="pairing-title">Filet de Bœuf Rossini</h3>
                            <p class="pairing-description">La richesse du filet de bœuf surmonté d'une escalope de foie gras poêlé s'accorde parfaitement avec la puissance et l'élégance de ce grand vin.</p>
                        </div>
                    </div>
                    
                    <div class="pairing-card">
                        <div class="pairing-image">
                            <img src="assets/images/pairing-lamb.jpg" alt="Agneau">
                        </div>
                        <div class="pairing-content">
                            <h3 class="pairing-title">Carré d'Agneau aux Herbes</h3>
                            <p class="pairing-description">La tendreté de l'agneau et les arômes des herbes fraîches mettent en valeur les notes fruitées et épicées du vin.</p>
                        </div>
                    </div>
                    
                    <div class="pairing-card">
                        <div class="pairing-image">
                            <img src="assets/images/pairing-truffle.jpg" alt="Risotto à la Truffe">
                        </div>
                        <div class="pairing-content">
                            <h3 class="pairing-title">Risotto à la Truffe Noire</h3>
                            <p class="pairing-description">Les arômes intenses de la truffe noire complètent harmonieusement la complexité aromatique et la structure équilibrée de ce grand cru.</p>
                        </div>
                    </div>
                    
                    <div class="pairing-card">
                        <div class="pairing-image">
                            <img src="assets/images/pairing-cheese.jpg" alt="Plateau de Fromages">
                        </div>
                        <div class="pairing-content">
                            <h3 class="pairing-title">Plateau de Fromages Affinés</h3>
                            <p class="pairing-description">Un assortiment de fromages affinés comme le Comté vieilli, le Beaufort ou le Brie truffé sublimera les qualités de ce vin prestigieux.</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Related Experiences -->
            <section class="related-experiences">
                <h2 class="section-title">Autres Expériences Recommandées</h2>
                
                <div class="experiences-grid">
                    <div class="experience-card">
                        <div class="experience-image">
                            <img src="assets/images/experience-regions.jpg" alt="Régions Viticoles">
                        </div>
                        <div class="experience-content">
                            <h3 class="experience-title">Voyage à travers les Terroirs</h3>
                            <p class="experience-description">Explorez les grands terroirs viticoles du monde et découvrez leur influence sur les caractéristiques des vins.</p>
                            <a href="regions.html" class="btn-link">Découvrir l'expérience</a>
                        </div>
                    </div>
                    
                    <div class="experience-card">
                        <div class="experience-image">
                            <img src="assets/images/experience-food.jpg" alt="Accords Mets et Vins">
                        </div>
                        <div class="experience-content">
                            <h3 class="experience-title">L'Art des Accords Mets & Vins</h3>
                            <p class="experience-description">Apprenez à marier les saveurs pour créer des expériences gustatives harmonieuses et mémorables.</p>
                            <a href="food-pairing.html" class="btn-link">Découvrir l'expérience</a>
                        </div>
                    </div>
                    
                    <div class="experience-card">
                        <div class="experience-image">
                            <img src="assets/images/experience-quiz.jpg" alt="Quiz Œnologique">
                        </div>
                        <div class="experience-content">
                            <h3 class="experience-title">Quiz Œnologique</h3>
                            <p class="experience-description">Testez vos connaissances viticoles et découvrez votre niveau d'expertise dans le monde du vin.</p>
                            <a href="quiz.html" class="btn-link">Découvrir l'expérience</a>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>
    
     <!-- Footer -->
     <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3 class="footer-column-title">À Propos</h3>
                    <ul class="footer-links">
                        <li class="footer-link"><a href="about.html">Notre Histoire</a></li>
                        <li class="footer-link"><a href="terms.html">Conditions Générales</a></li>
                        <li class="footer-link"><a href="privacy.html">Politique de Confidentialité</a></li>
                        <li class="footer-link"><a href="shipping.html">Livraisons & Retours</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3 class="footer-column-title">Découvrir</h3>
                    <ul class="footer-links">
                        <li class="footer-link"><a href="regions.html">Régions Viticoles</a></li>
                        <li class="footer-link"><a href="experience.html">Guide de Dégustation</a></li>
                        <li class="footer-link"><a href="quiz.html">Quiz Œnologique</a></li>
                        <li class="footer-link"><a href="blog.html">Blog & Actualités</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3 class="footer-column-title">Contact</h3>
                    <div class="footer-contact">
                        <div class="footer-contact-item">
                            <div class="footer-contact-icon">
                                <i class="fas fa-map-marker-alt"></i>
                            </div>
                            <div>
                                134 Quai de Bacalan<br>
                                33300 Bordeaux, France
                            </div>
                        </div>
                        <div class="footer-contact-item">
                            <div class="footer-contact-icon">
                                <i class="fas fa-phone"></i>
                            </div>
                            <div>+33 5 56 16 20 20</div>
                        </div>
                        <div class="footer-contact-item">
                            <div class="footer-contact-icon">
                                <i class="fas fa-envelope"></i>
                            </div>
                            <div>contact@citeduvin.com</div>
                        </div>
                    </div>
                </div>
                
                <div class="footer-column">
                    <h3 class="footer-column-title">Newsletter</h3>
                    <p>Inscrivez-vous pour recevoir nos offres et actualités.</p>
                    <form class="newsletter-form">
                        <input type="email" class="newsletter-input form-control" placeholder="Votre email" required>
                        <button type="submit" class="newsletter-button">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </form>
                    <div class="social-links">
                        <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-pinterest"></i></a>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <div class="copyright">
                    &copy; <span id="current-year"></span> Cité du Vin - Tous droits réservés
                </div>
            </div>
        </div>
    </footer>
    
    <!-- JavaScript libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    
    <!-- Custom JavaScript for the tasting experience -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize the 3D wine glass scene
            initTastingScene();
            
            // Set up tasting panel controls
            setupTastingControls();
            
            // Set up tasting stage navigation
            setupTastingStages();
            
            // Initialize radar charts for comparison
            initRadarCharts();
        });
        
        // Initialize the 3D tasting scene with Three.js
        function initTastingScene() {
            // Get canvas element
            const canvas = document.getElementById('tasting-canvas');
            
            // Create scene, camera and renderer
            const scene = new THREE.Scene();
            scene.background = new THREE.Color(0xf5f5f5);
            
            const camera = new THREE.PerspectiveCamera(45, canvas.clientWidth / canvas.clientHeight, 0.1, 1000);
            camera.position.z = 5;
            
            const renderer = new THREE.WebGLRenderer({ canvas, antialias: true });
            renderer.setSize(canvas.clientWidth, canvas.clientHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            
            // Add ambient light
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
            scene.add(ambientLight);
            
            // Add directional light
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(10, 10, 10);
            scene.add(directionalLight);
            
            // Create wine glass geometry
            const stemRadius = 0.05;
            const stemHeight = 1.2;
            const baseRadius = 0.3;
            const baseHeight = 0.1;
            const bowlRadius = 0.4;
            const bowlHeight = 0.7;
            
            // Create stem (cylinder)
            const stemGeometry = new THREE.CylinderGeometry(stemRadius, stemRadius, stemHeight, 32);
            const stemMaterial = new THREE.MeshPhysicalMaterial({ 
                color: 0xffffff,
                transparent: true,
                opacity: 0.9,
                roughness: 0.1,
                metalness: 0,
                clearcoat: 1.0,
                clearcoatRoughness: 0.1
            });
            const stem = new THREE.Mesh(stemGeometry, stemMaterial);
            stem.position.y = -stemHeight/2;
            
            // Create base (cylinder)
            const baseGeometry = new THREE.CylinderGeometry(baseRadius, baseRadius, baseHeight, 32);
            const baseMaterial = new THREE.MeshPhysicalMaterial({ 
                color: 0xffffff,
                transparent: true,
                opacity: 0.9,
                roughness: 0.1,
                metalness: 0,
                clearcoat: 1.0,
                clearcoatRoughness: 0.1
            });
            const base = new THREE.Mesh(baseGeometry, baseMaterial);
            base.position.y = -stemHeight - baseHeight/2;
            
            // Create bowl (ellipsoid)
            const bowlGeometry = new THREE.SphereGeometry(bowlRadius, 32, 32);
            bowlGeometry.scale(1, bowlHeight / bowlRadius, 1);
            const bowlMaterial = new THREE.MeshPhysicalMaterial({ 
                color: 0xffffff,
                transparent: true,
                opacity: 0.6,
                roughness: 0.1,
                metalness: 0,
                clearcoat: 1.0,
                clearcoatRoughness: 0.1
            });
            const bowl = new THREE.Mesh(bowlGeometry, bowlMaterial);
            bowl.position.y = 0.1;
            
            // Create wine (partial sphere)
            const wineGeometry = new THREE.SphereGeometry(bowlRadius * 0.95, 32, 32, 0, Math.PI * 2, 0, Math.PI * 0.6);
            wineGeometry.scale(1, bowlHeight / bowlRadius, 1);
            const wineMaterial = new THREE.MeshPhysicalMaterial({ 
                color: 0x8B0000,
                transparent: true,
                opacity: 0.9,
                roughness: 0.2,
                metalness: 0,
                clearcoat: 1.0,
                clearcoatRoughness: 0.1
            });
            const wine = new THREE.Mesh(wineGeometry, wineMaterial);
            wine.position.y = -0.1;
            wine.rotation.x = Math.PI;
            
            // Group all glass parts
            const glassGroup = new THREE.Group();
            glassGroup.add(stem);
            glassGroup.add(base);
            glassGroup.add(bowl);
            glassGroup.add(wine);
            scene.add(glassGroup);
            
            // Wine type selector event listeners
            const wineOptions = document.querySelectorAll('.wine-option');
            wineOptions.forEach(option => {
                option.addEventListener('click', () => {
                    // Remove active class from all options
                    wineOptions.forEach(opt => opt.classList.remove('active'));
                    
                    // Add active class to selected option
                    option.classList.add('active');
                    
                    // Update wine color based on selection
                    const wineType = option.getAttribute('data-wine');
                    let wineColor;
                    
                    switch (wineType) {
                        case 'red':
                            wineColor = 0x8B0000;
                            break;
                        case 'white':
                            wineColor = 0xF4E992;
                            break;
                        case 'rose':
                            wineColor = 0xE4717A;
                            break;
                        case 'sparkling':
                            wineColor = 0xF8F4E1;
                            
                            // Add bubble animation for sparkling wine
                            if (!window.bubbleAnimation) {
                                createBubbles(scene, wine);
                                window.bubbleAnimation = true;
                            }
                            break;
                    }
                    
                    // Update wine material color
                    wineMaterial.color.setHex(wineColor);
                });
            });
            
            // Animate the scene
            function animate() {
                requestAnimationFrame(animate);
                
                // Gently rotate the glass
                glassGroup.rotation.y += 0.002;
                
                // Animate bubbles if sparkling wine
                if (window.bubbles) {
                    animateBubbles();
                }
                
                renderer.render(scene, camera);
            }
            
            // Handle window resize
            window.addEventListener('resize', () => {
                camera.aspect = canvas.clientWidth / canvas.clientHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(canvas.clientWidth, canvas.clientHeight);
            });
            
            // Start animation
            animate();
            
            // Create interactive tasting notes (hot spots)
            createTastingNotes();
            
            // Store scene objects in window for access from other functions
            window.tastingScene = {
                scene,
                camera,
                renderer,
                glassGroup,
                wine,
                wineMaterial
            };
        }
        
        // Create bubbles for sparkling wine
        function createBubbles(scene, wine) {
            // Create bubble geometry
            const bubbleGeometry = new THREE.SphereGeometry(0.01, 8, 8);
            const bubbleMaterial = new THREE.MeshPhysicalMaterial({
                color: 0xffffff,
                transparent: true,
                opacity: 0.6,
                roughness: 0.1,
                metalness: 0,
                clearcoat: 1.0,
                clearcoatRoughness: 0.1
            });
            
            // Create multiple bubbles
            window.bubbles = [];
            for (let i = 0; i < 30; i++) {
                const bubble = new THREE.Mesh(bubbleGeometry, bubbleMaterial);
                
                // Random position within the wine
                const theta = Math.random() * Math.PI * 2;
                const radius = Math.random() * 0.3;
                bubble.position.x = radius * Math.cos(theta);
                bubble.position.z = radius * Math.sin(theta);
                bubble.position.y = -0.3 + Math.random() * 0.2;
                
                // Random scale
                const scale = Math.random() * 0.5 + 0.5;
                bubble.scale.set(scale, scale, scale);
                
                // Store bubble properties for animation
                bubble.userData.speed = Math.random() * 0.005 + 0.002;
                bubble.userData.oscillationSpeed = Math.random() * 0.02 + 0.01;
                bubble.userData.oscillationDistance = Math.random() * 0.03 + 0.02;
                bubble.userData.initialX = bubble.position.x;
                
                scene.add(bubble);
                window.bubbles.push(bubble);
            }
        }
        
        // Animate bubbles
        function animateBubbles() {
            if (!window.bubbles) return;
            
            window.bubbles.forEach(bubble => {
                // Move bubble up
                bubble.position.y += bubble.userData.speed;
                
                // Add oscillation in x direction
                bubble.position.x = bubble.userData.initialX + 
                    Math.sin(Date.now() * bubble.userData.oscillationSpeed) * 
                    bubble.userData.oscillationDistance;
                
                // Reset bubble position when it reaches the top
                if (bubble.position.y > 0.3) {
                    bubble.position.y = -0.3 + Math.random() * 0.2;
                }
            });
        }
        
        // Create interactive tasting notes
        function createTastingNotes() {
            const tastingNotes = [
                { 
                    position: { x: 150, y: 100 }, 
                    title: 'Robe', 
                    content: 'Couleur rubis profond avec des reflets grenat' 
                },
                { 
                    position: { x: 300, y: 150 }, 
                    title: 'Brillance', 
                    content: 'Très brillant, sans aucun trouble visible' 
                },
                { 
                    position: { x: 250, y: 250 }, 
                    title: 'Viscosité', 
                    content: 'Larmes lentes et nombreuses indiquant une bonne concentration' 
                },
                { 
                    position: { x: 400, y: 300 }, 
                    title: 'Intensité', 
                    content: 'Robe dense et profonde, signe d\'un vin de structure' 
                }
            ];
            
            const scene = document.querySelector('.tasting-scene');
            
            tastingNotes.forEach((note, index) => {
                // Create note element
                const noteElement = document.createElement('div');
                noteElement.className = 'tasting-note';
                noteElement.textContent = (index + 1).toString();
                noteElement.style.left = note.position.x + 'px';
                noteElement.style.top = note.position.y + 'px';
                
                // Add tooltip data
                noteElement.setAttribute('data-title', note.title);
                noteElement.setAttribute('data-content', note.content);
                
                // Add to scene
                scene.appendChild(noteElement);
                
                // Add hover event for tooltip
                noteElement.addEventListener('mouseenter', showNoteTooltip);
                noteElement.addEventListener('mouseleave', hideNoteTooltip);
                
                // Animate note in
                setTimeout(() => {
                    noteElement.style.opacity = '1';
                }, index * 300);
            });
        }
        
        // Show note tooltip
        function showNoteTooltip(event) {
            const note = event.target;
            const title = note.getAttribute('data-title');
            const content = note.getAttribute('data-content');
            
            // Create tooltip
            const tooltip = document.createElement('div');
            tooltip.className = 'tasting-note-tooltip';
            tooltip.innerHTML = `
                <h4>${title}</h4>
                <p>${content}</p>
            `;
            
            // Position tooltip
            tooltip.style.left = (parseInt(note.style.left) + 30) + 'px';
            tooltip.style.top = (parseInt(note.style.top) - 20) + 'px';
            
            // Add to scene
            document.querySelector('.tasting-scene').appendChild(tooltip);
            
            // Show tooltip with delay for animation
            setTimeout(() => {
                tooltip.style.opacity = '1';
            }, 10);
        }
        
        // Hide note tooltip
        function hideNoteTooltip() {
            const tooltip = document.querySelector('.tasting-note-tooltip');
            if (tooltip) {
                tooltip.style.opacity = '0';
                setTimeout(() => {
                    tooltip.remove();
                }, 300);
            }
        }
        
        // Setup tasting controls
        function setupTastingControls() {
            const actionPanel = document.getElementById('action-panel');
            const panelContent = document.getElementById('panel-content');
            
            // Control buttons
            const visualBtn = document.getElementById('visual-btn');
            const noseBtn = document.getElementById('nose-btn');
            const tasteBtn = document.getElementById('taste-btn');
            const infoBtn = document.getElementById('info-btn');
            const notesBtn = document.getElementById('notes-btn');
            
            // Visual analysis button
            visualBtn.addEventListener('click', () => {
                showPanel('visual', 'Analyse Visuelle', `
                    <h3>Examen Visuel</h3>
                    <p>L'examen visuel est la première étape de la dégustation. Elle consiste à observer la couleur, la brillance, la limpidité et la viscosité du vin.</p>
                    
                    <h4 class="mt-3">Conseils pour l'analyse visuelle :</h4>
                    <ul>
                        <li>Inclinez le verre à 45° pour apprécier la teinte et la brillance</li>
                        <li>Observez les bords du disque, plus pâles, qui révèlent l'âge du vin</li>
                        <li>Faites tourner le vin pour observer les "jambes" ou "larmes"</li>
                        <li>Notez l'intensité de la couleur qui indique la concentration</li>
                    </ul>
                    
                    <p class="mt-3">Pour ce Château Margaux 2015, la robe est d'un rubis profond avec des reflets grenat, signe d'un vin rouge riche et concentré, encore dans sa jeunesse.</p>
                `);
                
                // Update active stage in the stages navigation
                setActiveStage('visual');
            });
            
            // Nose analysis button
            noseBtn.addEventListener('click', () => {
                showPanel('nose', 'Analyse Olfactive', `
                    <h3>Examen Olfactif</h3>
                    <p>L'examen olfactif permet d'identifier les arômes du vin et d'évaluer sa complexité. On distingue le premier nez (sans agitation) et le second nez (après agitation).</p>
                    
                    <h4 class="mt-3">Conseils pour l'analyse olfactive :</h4>
                    <ul>
                        <li>Commencez par sentir le vin sans agitation (premier nez)</li>
                        <li>Faites tourner le vin pour libérer les arômes (second nez)</li>
                        <li>Identifiez les familles d'arômes (fruits, fleurs, épices, etc.)</li>
                        <li>Évaluez l'intensité et la complexité aromatique</li>
                    </ul>
                    
                    <h4 class="mt-3">Palette Aromatique :</h4>
                    <div class="aroma-palette">
                        <span class="aroma-tag aroma-item-fruits" style="--intensity: 0.8">Cassis</span>
                        <span class="aroma-tag aroma-item-fruits" style="--intensity: 0.7">Mûre</span>
                        <span class="aroma-tag aroma-item-floral" style="--intensity: 0.6">Violette</span>
                        <span class="aroma-tag aroma-item-oak" style="--intensity: 0.7">Cèdre</span>
                        <span class="aroma-tag aroma-item-oak" style="--intensity: 0.6">Tabac</span>
                        <span class="aroma-tag aroma-item-spice" style="--intensity: 0.5">Vanille</span>
                    </div>
                `);
                
                // Update active stage in the stages navigation
                setActiveStage('nose');
            });
            
            // Taste analysis button
            tasteBtn.addEventListener('click', () => {
                showPanel('taste', 'Analyse Gustative', `
                    <h3>Examen Gustatif</h3>
                    <p>L'examen gustatif consiste à évaluer la structure, l'équilibre et les saveurs du vin en bouche.</p>
                    
                    <h4 class="mt-3">Conseils pour l'analyse gustative :</h4>
                    <ul>
                        <li>Prenez une petite gorgée et laissez-la parcourir toute la bouche</li>
                        <li>Évaluez l'attaque, le milieu de bouche et la finale</li>
                        <li>Notez l'équilibre entre acidité, tanins, alcool et corps</li>
                        <li>Estimez la longueur en bouche (persistance aromatique)</li>
                    </ul>
                    
                    <h4 class="mt-3">Structure :</h4>
                    <div class="wine-attributes">
                        <div class="wine-attribute">Tanins soyeux</div>
                        <div class="wine-attribute">Acidité équilibrée</div>
                        <div class="wine-attribute">Corps puissant</div>
                        <div class="wine-attribute">Finale longue</div>
                    </div>
                    
                    <p class="mt-3">Ce Château Margaux 2015 présente un équilibre remarquable entre puissance et élégance, avec des tanins fins et soyeux, une acidité bien intégrée et une finale impressionnante de plus de 30 secondes.</p>
                `);
                
                // Update active stage in the stages navigation
                setActiveStage('taste');
            });
            
            // Wine info button
            infoBtn.addEventListener('click', () => {
                showPanel('info', 'Informations sur le Vin', `
                    <h3>Château Margaux 2015</h3>
                    <div class="wine-info-card mt-3">
                        <div class="wine-info-header">
                            <div class="wine-info-color" style="background-color: #8B0000;"></div>
                            <div>
                                <h3>Fiche Technique</h3>
                            </div>
                        </div>
                        
                        <div class="wine-attributes mt-3">
                            <div class="wine-attribute">Premier Grand Cru Classé</div>
                            <div class="wine-attribute">AOC Margaux</div>
                            <div class="wine-attribute">Millésime 2015</div>
                        </div>
                        
                        <h4 class="mt-3">Terroir</h4>
                        <p>Situé sur la rive gauche de la Garonne, le vignoble de Château Margaux s'étend sur 82 hectares dont 65 sont dédiés à la production de vin rouge. Le terroir est constitué de graves profondes et maigres sur un sous-sol argileux et calcaire.</p>
                        
                        <h4 class="mt-3">Cépages</h4>
                        <div class="wine-attributes">
                            <div class="wine-attribute">Cabernet Sauvignon 90%</div>
                            <div class="wine-attribute">Merlot 7%</div>
                            <div class="wine-attribute">Cabernet Franc 2%</div>
                            <div class="wine-attribute">Petit Verdot 1%</div>
                        </div>
                        
                        <h4 class="mt-3">Vinification</h4>
                        <p>Vendanges manuelles avec tri sélectif à la vigne et au chai. Fermentation en cuves bois et béton thermo-régulées. Macération de 3 à 4 semaines. Élevage de 21 mois en barriques de chêne français neuves à 100%.</p>
                        
                        <h4 class="mt-3">Particularités du Millésime 2015</h4>
                        <p>Le millésime 2015 est considéré comme exceptionnel à Bordeaux, avec des conditions climatiques idéales ayant permis une parfaite maturation des raisins. Il est déjà considéré comme l'un des plus grands millésimes de Château Margaux.</p>
                    </div>
                `);
            });
            
            // Tasting notes button
            notesBtn.addEventListener('click', () => {
                showPanel('notes', 'Vos Notes de Dégustation', `
                    <h3>Vos Notes Personnelles</h3>
                    <p>Complétez vos impressions sur ce vin pour garder une trace de votre dégustation.</p>
                    
                    <div class="interactive-tasting-form mt-4">
                        <h4>Évaluation Globale</h4>
                        <div class="form-group mt-3">
                            <label class="form-label">Note (sur 100)</label>
                            <input type="number" class="form-control" value="95" min="0" max="100">
                        </div>
                        
                        <div class="form-group mt-3">
                            <label class="form-label">Moment idéal de consommation</label>
                            <select class="form-control">
                                <option>Maintenant</option>
                                <option>Dans 5 ans</option>
                                <option selected>Dans 10 ans</option>
                                <option>Dans 15 ans ou plus</option>
                            </select>
                        </div>
                        
                        <div class="form-group mt-3">
                            <label class="form-label">Rapport qualité/prix</label>
                            <select class="form-control">
                                <option>Excellent</option>
                                <option selected>Très bon</option>
                                <option>Bon</option>
                                <option>Moyen</option>
                                <option>Faible</option>
                            </select>
                        </div>
                        
                        <div class="form-group mt-3">
                            <label class="form-label">Notes Personnelles</label>
                            <textarea class="form-control" rows="5" placeholder="Vos impressions, souvenirs ou contextes de dégustation..."></textarea>
                        </div>
                        
                        <button class="btn primary mt-3">Sauvegarder mes notes</button>
                    </div>
                `);
            });
            
            // Function to show panel content
            function showPanel(type, title, content) {
                // Set panel title and content
                panelContent.innerHTML = `
                    <h2>${title}</h2>
                    <button class="panel-close-btn" id="panel-close-btn">
                        <i class="fas fa-times"></i>
                    </button>
                    <div class="panel-content-body mt-3">
                        ${content}
                    </div>
                `;
                
                // Show panel
                actionPanel.classList.add('show');
                
                // Add event listener to close button
                document.getElementById('panel-close-btn').addEventListener('click', () => {
                    actionPanel.classList.remove('show');
                });
            }
        }
        
        // Setup tasting stages navigation
        function setupTastingStages() {
            const stages = document.querySelectorAll('.tasting-stage');
            const stagePanels = document.querySelectorAll('.stage-panel');
            
            stages.forEach(stage => {
                stage.addEventListener('click', () => {
                    const stageId = stage.getAttribute('data-stage');
                    setActiveStage(stageId);
                });
            });
        }
        
        // Set active tasting stage
        function setActiveStage(stageId) {
            // Update stage tabs
            const stages = document.querySelectorAll('.tasting-stage');
            stages.forEach(stage => {
                stage.classList.toggle('active', stage.getAttribute('data-stage') === stageId);
            });
            
            // Update stage panels
            const stagePanels = document.querySelectorAll('.stage-panel');
            stagePanels.forEach(panel => {
                const panelId = panel.id;
                panel.style.display = panelId === `${stageId}-stage` ? 'block' : 'none';
            });
            
            // Close action panel if open
            document.getElementById('action-panel').classList.remove('show');
        }
        
        // Initialize radar charts for tasting comparison
        function initRadarCharts() {
            // Aroma profile radar chart
            const aromaCtx = document.getElementById('aroma-radar-chart');
            if (aromaCtx) {
                const aromaChart = new Chart(aromaCtx, {
                    type: 'radar',
                    data: {
                        labels: ['Fruits Rouges', 'Fruits Noirs', 'Floral', 'Épices', 'Boisé', 'Minéral'],
                        datasets: [
                            {
                                label: 'Votre Évaluation',
                                data: [6, 9, 7, 6, 8, 5],
                                backgroundColor: 'rgba(139, 0, 0, 0.2)',
                                borderColor: 'rgba(139, 0, 0, 1)',
                                pointBackgroundColor: 'rgba(139, 0, 0, 1)',
                                pointBorderColor: '#fff',
                                pointHoverBackgroundColor: '#fff',
                                pointHoverBorderColor: 'rgba(139, 0, 0, 1)'
                            },
                            {
                                label: 'Œnologue',
                                data: [5, 9, 8, 7, 8, 6],
                                backgroundColor: 'rgba(54, 162, 235, 0.2)',
                                borderColor: 'rgba(54, 162, 235, 1)',
                                pointBackgroundColor: 'rgba(54, 162, 235, 1)',
                                pointBorderColor: '#fff',
                                pointHoverBackgroundColor: '#fff',
                                pointHoverBorderColor: 'rgba(54, 162, 235, 1)'
                            }
                        ]
                    },
                    options: {
                        scales: {
                            r: {
                                beginAtZero: true,
                                max: 10,
                                ticks: {
                                    stepSize: 2
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        }
                    }
                });
            }
            
            // Structure radar chart
            const structureCtx = document.getElementById('structure-radar-chart');
            if (structureCtx) {
                const structureChart = new Chart(structureCtx, {
                    type: 'radar',
                    data: {
                        labels: ['Corps', 'Acidité', 'Tanins', 'Alcool', 'Longueur', 'Équilibre'],
                        datasets: [
                            {
                                label: 'Votre Évaluation',
                                data: [8, 6, 7, 7, 9, 8],
                                backgroundColor: 'rgba(139, 0, 0, 0.2)',
                                borderColor: 'rgba(139, 0, 0, 1)',
                                pointBackgroundColor: 'rgba(139, 0, 0, 1)',
                                pointBorderColor: '#fff',
                                pointHoverBackgroundColor: '#fff',
                                pointHoverBorderColor: 'rgba(139, 0, 0, 1)'
                            },
                            {
                                label: 'Œnologue',
                                data: [9, 7, 8, 8, 9, 9],
                                backgroundColor: 'rgba(54, 162, 235, 0.2)',
                                borderColor: 'rgba(54, 162, 235, 1)',
                                pointBackgroundColor: 'rgba(54, 162, 235, 1)',
                                pointBorderColor: '#fff',
                                pointHoverBackgroundColor: '#fff',
                                pointHoverBorderColor: 'rgba(54, 162, 235, 1)'
                            }
                        ]
                    },
                    options: {
                        scales: {
                            r: {
                                beginAtZero: true,
                                max: 10,
                                ticks: {
                                    stepSize: 2
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        }
                    }
                });
            }
        }
    </script>
</body>
</html>