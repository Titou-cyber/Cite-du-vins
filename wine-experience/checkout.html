<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Complete your Terroir wine purchase with our secure checkout process. Fast shipping and secure payment options available.">
    <title>Checkout | Terroir - La Cité Du Vin</title>
    
    <!-- Preload critical resources -->
    <link rel="preload" href="css/styles.css" as="style">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" as="style">
    
    <!-- Favicon -->
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Raleway:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Modern Navbar with Cart -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <span class="brand-icon"><i class="fas fa-wine-glass-alt"></i></span>
                <span class="brand-text">Terroir</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html">Discover</a></li>
                    <li class="nav-item"><a class="nav-link" href="wines.html">Collection</a></li>
                    <li class="nav-item"><a class="nav-link" href="sommelier.html">Sommelier</a></li>
                    <li class="nav-item"><a class="nav-link" href="knowledge.html">Expertise</a></li>
                </ul>
                <div class="navbar-nav ms-auto d-flex align-items-center">
                    <div class="search-icon me-3" role="button" tabindex="0" aria-label="Search">
                        <i class="fas fa-search"></i>
                    </div>
                    <div class="cart-icon me-3 position-relative active" id="cart-icon" role="button" tabindex="0" aria-label="Shopping cart">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-count" id="cart-count">3</span>
                    </div>
                    <div class="user-menu dropdown">
                        <div class="user-icon" role="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false" tabindex="0" aria-label="User account">
                            <i class="fas fa-user"></i>
                        </div>
                        <ul class="dropdown-menu dropdown-menu-end user-dropdown" aria-labelledby="userDropdown">
                            <li><a class="dropdown-item" href="account.html"><i class="fas fa-user-circle me-2"></i>My Account</a></li>
                            <li><a class="dropdown-item" href="account.html?tab=orders"><i class="fas fa-shopping-bag me-2"></i>My Orders</a></li>
                            <li><a class="dropdown-item" href="account.html?tab=preferences"><i class="fas fa-wine-glass me-2"></i>My Preferences</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#" id="logout-link"><i class="fas fa-sign-out-alt me-2"></i>Sign Out</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="hero checkout-hero">
        <div class="container text-center text-white">
            <h1 class="display-4">Checkout</h1>
            <p class="lead">Complete your purchase and enjoy our premium wines</p>
        </div>
    </header>

    <!-- Checkout Section -->
    <section class="py-5">
        <div class="container checkout-container">
            <div class="checkout-header">
                <h2>Complete Your Purchase</h2>
                <p>Follow the steps below to complete your order</p>
                
                <!-- Checkout Progress -->
                <div class="checkout-progress">
                    <div class="checkout-step active" data-step="shipping">
                        <div class="checkout-step-circle">1</div>
                        <div class="checkout-step-label">Shipping</div>
                    </div>
                    <div class="checkout-step" data-step="payment">
                        <div class="checkout-step-circle">2</div>
                        <div class="checkout-step-label">Payment</div>
                    </div>
                    <div class="checkout-step" data-step="review">
                        <div class="checkout-step-circle">3</div>
                        <div class="checkout-step-label">Review</div>
                    </div>
                    <div class="checkout-step" data-step="confirmation">
                        <div class="checkout-step-circle">4</div>
                        <div class="checkout-step-label">Confirmation</div>
                    </div>
                </div>
            </div>
            
            <div class="checkout-content">
                <!-- Step 1: Shipping -->
                <div class="checkout-step-content active" id="shipping-step">
                    <div class="row">
                        <div class="col-lg-8">
                            <div class="checkout-section">
                                <h3 class="checkout-section-title">Shipping Address</h3>
                                
                                <div class="saved-addresses mb-4">
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <div class="address-card selected">
                                                <div class="address-card-header">
                                                    <h4 class="address-card-title">Home</h4>
                                                    <span class="address-card-default">Default</span>
                                                </div>
                                                <div class="address-card-content">
                                                    <p>Wine Enthusiast<br>
                                                    123 Vineyard Lane<br>
                                                    Wine Country, CA 95476<br>
                                                    United States<br>
                                                    Phone: (555) 123-4567</p>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="col-md-6 mb-3">
                                            <div class="address-card">
                                                <div class="address-card-header">
                                                    <h4 class="address-card-title">Office</h4>
                                                </div>
                                                <div class="address-card-content">
                                                    <p>Wine Enthusiast<br>
                                                    456 Corporate Plaza, Suite 300<br>
                                                    San Francisco, CA 94107<br>
                                                    United States<br>
                                                    Phone: (555) 987-6543</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="address-actions mb-4">
                                        <button class="btn btn-sm btn-outline" id="new-address-btn">
                                            <i class="fas fa-plus me-2"></i>Add New Address
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="shipping-methods mb-4">
                                    <h4 class="h5 mb-3">Shipping Method</h4>
                                    
                                    <div class="form-check mb-3">
                                        <input class="form-check-input" type="radio" name="shipping-method" id="standard-shipping" checked>
                                        <label class="form-check-label d-flex justify-content-between align-items-center w-100" for="standard-shipping">
                                            <div>
                                                <strong>Standard Shipping</strong>
                                                <span class="d-block text-muted small">Delivery in 3-5 business days</span>
                                            </div>
                                            <span class="shipping-price">$12.00</span>
                                        </label>
                                    </div>
                                    
                                    <div class="form-check mb-3">
                                        <input class="form-check-input" type="radio" name="shipping-method" id="express-shipping">
                                        <label class="form-check-label d-flex justify-content-between align-items-center w-100" for="express-shipping">
                                            <div>
                                                <strong>Express Shipping</strong>
                                                <span class="d-block text-muted small">Delivery in 1-2 business days</span>
                                            </div>
                                            <span class="shipping-price">$24.00</span>
                                        </label>
                                    </div>
                                    
                                    <div class="form-check mb-3">
                                        <input class="form-check-input" type="radio" name="shipping-method" id="pickup">
                                        <label class="form-check-label d-flex justify-content-between align-items-center w-100" for="pickup">
                                            <div>
                                                <strong>Store Pickup</strong>
                                                <span class="d-block text-muted small">Pickup at La Cité Du Vin, Bordeaux</span>
                                            </div>
                                            <span class="shipping-price">Free</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="checkout-buttons">
                                <a href="wines.html" class="btn btn-outline-secondary">
                                    <i class="fas fa-arrow-left me-2"></i>Continue Shopping
                                </a>
                                <button class="btn btn-burgundy" id="shipping-next-btn">
                                    Continue to Payment<i class="fas fa-arrow-right ms-2"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="col-lg-4">
                            <div class="checkout-summary">
                                <h3 class="h5 mb-4">Order Summary</h3>
                                
                                <div class="summary-item">
                                    <span class="summary-label">Items (3)</span>
                                    <span class="summary-value">$297.00</span>
                                </div>
                                
                                <div class="summary-item">
                                    <span class="summary-label">Shipping</span>
                                    <span class="summary-value" id="shipping-cost">$12.00</span>
                                </div>
                                
                                <div class="summary-item">
                                    <span class="summary-label">Tax</span>
                                    <span class="summary-value">$24.72</span>
                                </div>
                                
                                <div class="summary-item total">
                                    <span class="summary-label">Total</span>
                                    <span class="summary-value" id="order-total">$333.72</span>
                                </div>
                                
                                <div class="checkout-products mt-4">
                                    <h4 class="h6 mb-3">Items in Your Order</h4>
                                    
                                    <div class="checkout-product">
                                        <div class="checkout-product-image">
                                            <img src="https://images.unsplash.com/photo-1510812431401-41d2bd2722f3?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&h=100&q=80" alt="Château Margaux 2018">
                                        </div>
                                        <div class="checkout-product-details">
                                            <h5 class="checkout-product-title">Château Margaux 2018</h5>
                                            <p class="checkout-product-subtitle">Margaux, Bordeaux</p>
                                            <div class="d-flex justify-content-between">
                                                <span class="checkout-product-price">$195.00</span>
                                                <span class="checkout-product-quantity">Qty: 1</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="checkout-product">
                                        <div class="checkout-product-image">
                                            <img src="https://images.unsplash.com/photo-1562601579-599dec564e06?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&h=100&q=80" alt="Puligny-Montrachet 2020">
                                        </div>
                                        <div class="checkout-product-details">
                                            <h5 class="checkout-product-title">Puligny-Montrachet 2020</h5>
                                            <p class="checkout-product-subtitle">Burgundy, France</p>
                                            <div class="d-flex justify-content-between">
                                                <span class="checkout-product-price">$72.00</span>
                                                <span class="checkout-product-quantity">Qty: 1</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="checkout-product">
                                        <div class="checkout-product-image">
                                            <img src="https://images.unsplash.com/photo-1523986490752-c28064f26be3?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&h=100&q=80" alt="Rioja Reserva 2017">
                                        </div>
                                        <div class="checkout-product-details">
                                            <h5 class="checkout-product-title">Rioja Reserva 2017</h5>
                                            <p class="checkout-product-subtitle">Rioja, Spain</p>
                                            <div class="d-flex justify-content-between">
                                                <span class="checkout-product-price">$30.00</span>
                                                <span class="checkout-product-quantity">Qty: 1</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="promo-code mt-4">
                                    <div class="input-group">
                                        <input type="text" class="form-control" placeholder="Promo code">
                                        <button class="btn btn-outline-secondary" type="button">Apply</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Step 2: Payment -->
                <div class="checkout-step-content" id="payment-step">
                    <div class="row">
                        <div class="col-lg-8">
                            <div class="checkout-section">
                                <h3 class="checkout-section-title">Payment Method</h3>
                                
                                <div class="payment-methods mb-4">
                                    <div class="payment-options mb-4">
                                        <div class="payment-option selected" data-payment="card">
                                            <div class="payment-option-icon">
                                                <i class="fas fa-credit-card"></i>
                                            </div>
                                            <p class="payment-option-label">Credit Card</p>
                                        </div>
                                        
                                        <div class="payment-option" data-payment="paypal">
                                            <div class="payment-option-icon">
                                                <i class="fab fa-paypal"></i>
                                            </div>
                                            <p class="payment-option-label">PayPal</p>
                                        </div>
                                        
                                        <div class="payment-option" data-payment="applepay">
                                            <div class="payment-option-icon">
                                                <i class="fab fa-apple-pay"></i>
                                            </div>
                                            <p class="payment-option-label">Apple Pay</p>
                                        </div>
                                    </div>
                                    
                                    <div id="card-payment-form">
                                        <div class="form-group">
                                            <label for="card-number" class="form-label">Card Number</label>
                                            <input type="text" id="card-number" class="form-control" placeholder="1234 5678 9012 3456">
                                        </div>
                                        
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="expiry-date" class="form-label">Expiration Date</label>
                                                <input type="text" id="expiry-date" class="form-control" placeholder="MM/YY">
                                            </div>
                                            
                                            <div class="form-group">
                                                <label for="cvv" class="form-label">CVV</label>
                                                <input type="text" id="cvv" class="form-control" placeholder="123">
                                            </div>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="card-name" class="form-label">Name on Card</label>
                                            <input type="text" id="card-name" class="form-control" placeholder="John Doe">
                                        </div>
                                    </div>
                                    
                                    <div id="paypal-payment-form" class="d-none">
                                        <p class="mb-4">You will be redirected to PayPal to complete your payment after reviewing your order.</p>
                                        <div class="paypal-logo">
                                            <img src="https://www.paypalobjects.com/webstatic/en_US/i/buttons/PP_logo_h_100x26.png" alt="PayPal">
                                        </div>
                                    </div>
                                    
                                    <div id="applepay-payment-form" class="d-none">
                                        <p class="mb-4">You will be able to use Apple Pay to complete your payment after reviewing your order.</p>
                                        <div class="applepay-logo">
                                            <i class="fab fa-apple-pay fa-3x"></i>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="billing-address mb-4">
                                    <h4 class="h5 mb-3">Billing Address</h4>
                                    
                                    <div class="form-check mb-3">
                                        <input class="form-check-input" type="checkbox" id="same-address" checked>
                                        <label class="form-check-label" for="same-address">
                                            Same as shipping address
                                        </label>
                                    </div>
                                    
                                    <div id="different-billing-address" class="d-none">
                                        <!-- Billing address form fields would go here -->
                                        <div class="form-group">
                                            <label for="billing-address1" class="form-label">Address Line 1</label>
                                            <input type="text" id="billing-address1" class="form-control">
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="billing-address2" class="form-label">Address Line 2 (Optional)</label>
                                            <input type="text" id="billing-address2" class="form-control">
                                        </div>
                                        
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="billing-city" class="form-label">City</label>
                                                <input type="text" id="billing-city" class="form-control">
                                            </div>
                                            
                                            <div class="form-group">
                                                <label for="billing-state" class="form-label">State/Province</label>
                                                <input type="text" id="billing-state" class="form-control">
                                            </div>
                                        </div>
                                        
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="billing-zip" class="form-label">Zip/Postal Code</label>
                                                <input type="text" id="billing-zip" class="form-control">
                                            </div>
                                            
                                            <div class="form-group">
                                                <label for="billing-country" class="form-label">Country</label>
                                                <select id="billing-country" class="form-control">
                                                    <option value="US">United States</option>
                                                    <option value="CA">Canada</option>
                                                    <option value="GB">United Kingdom</option>
                                                    <option value="FR">France</option>
                                                    <option value="DE">Germany</option>
                                                    <option value="IT">Italy</option>
                                                    <option value="ES">Spain</option>
                                                    <option value="AU">Australia</option>
                                                    <option value="NZ">New Zealand</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="checkout-buttons">
                                <button class="btn btn-outline-secondary" id="payment-back-btn">
                                    <i class="fas fa-arrow-left me-2"></i>Back to Shipping
                                </button>
                                <button class="btn btn-burgundy" id="payment-next-btn">
                                    Review Order<i class="fas fa-arrow-right ms-2"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="col-lg-4">
                            <div class="checkout-summary">
                                <h3 class="h5 mb-4">Order Summary</h3>
                                
                                <div class="summary-item">
                                    <span class="summary-label">Items (3)</span>
                                    <span class="summary-value">$297.00</span>
                                </div>
                                
                                <div class="summary-item">
                                    <span class="summary-label">Shipping</span>
                                    <span class="summary-value" id="shipping-cost-payment">$12.00</span>
                                </div>
                                
                                <div class="summary-item">
                                    <span class="summary-label">Tax</span>
                                    <span class="summary-value">$24.72</span>
                                </div>
                                
                                <div class="summary-item total">
                                    <span class="summary-label">Total</span>
                                    <span class="summary-value" id="order-total-payment">$333.72</span>
                                </div>
                                
                                <div class="checkout-products mt-4">
                                    <h4 class="h6 mb-3">Items in Your Order</h4>
                                    
                                    <div class="checkout-product">
                                        <div class="checkout-product-image">
                                            <img src="https://images.unsplash.com/photo-1510812431401-41d2bd2722f3?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&h=100&q=80" alt="Château Margaux 2018">
                                        </div>
                                        <div class="checkout-product-details">
                                            <h5 class="checkout-product-title">Château Margaux 2018</h5>
                                            <div class="d-flex justify-content-between">
                                                <span class="checkout-product-price">$195.00</span>
                                                <span class="checkout-product-quantity">Qty: 1</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="checkout-product">
                                        <div class="checkout-product-image">
                                            <img src="https://images.unsplash.com/photo-1562601579-599dec564e06?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&h=100&q=80" alt="Puligny-Montrachet 2020">
                                        </div>
                                        <div class="checkout-product-details">
                                            <h5 class="checkout-product-title">Puligny-Montrachet 2020</h5>
                                            <div class="d-flex justify-content-between">
                                                <span class="checkout-product-price">$72.00</span>
                                                <span class="checkout-product-quantity">Qty: 1</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="checkout-product">
                                        <div class="checkout-product-image">
                                            <img src="https://images.unsplash.com/photo-1523986490752-c28064f26be3?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&h=100&q=80" alt="Rioja Reserva 2017">
                                        </div>
                                        <div class="checkout-product-details">
                                            <h5 class="checkout-product-title">Rioja Reserva 2017</h5>
                                            <div class="d-flex justify-content-between">
                                                <span class="checkout-product-price">$30.00</span>
                                                <span class="checkout-product-quantity">Qty: 1</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Step 3: Review -->
                <div class="checkout-step-content" id="review-step">
                    <div class="row">
                        <div class="col-lg-8">
                            <div class="checkout-section">
                                <h3 class="checkout-section-title">Review Your Order</h3>
                                
                                <div class="review-sections">
                                    <div class="checkout-card mb-4">
                                        <div class="checkout-card-header">
                                            <h4 class="checkout-card-title">
                                                <i class="fas fa-map-marker-alt me-2"></i> Shipping Information
                                            </h4>
                                            <button class="btn btn-sm btn-outline" data-edit="shipping">Edit</button>
                                        </div>
                                        <div class="checkout-card-body">
                                            <p class="mb-0" id="review-shipping-address">
                                                Wine Enthusiast<br>
                                                123 Vineyard Lane<br>
                                                Wine Country, CA 95476<br>
                                                United States<br>
                                                Phone: (555) 123-4567
                                            </p>
                                            <p class="mt-3 mb-0" id="review-shipping-method">
                                                <strong>Shipping Method:</strong> Standard Shipping (3-5 business days)
                                            </p>
                                        </div>
                                    </div>
                                    
                                    <div class="checkout-card mb-4">
                                        <div class="checkout-card-header">
                                            <h4 class="checkout-card-title">
                                                <i class="fas fa-credit-card me-2"></i> Payment Information
                                            </h4>
                                            <button class="btn btn-sm btn-outline" data-edit="payment">Edit</button>
                                        </div>
                                        <div class="checkout-card-body">
                                            <p class="mb-0" id="review-payment-method">
                                                <strong>Payment Method:</strong> Credit Card<br>
                                                <span id="card-display">**** **** **** 1234</span><br>
                                                <span id="card-name-display">John Doe</span>
                                            </p>
                                            <p class="mt-3 mb-0" id="review-billing-address">
                                                <strong>Billing Address:</strong> Same as shipping address
                                            </p>
                                        </div>
                                    </div>
                                    
                                    <div class="checkout-card mb-4">
                                        <div class="checkout-card-header">
                                            <h4 class="checkout-card-title">
                                                <i class="fas fa-wine-bottle me-2"></i> Order Items
                                            </h4>
                                            <a href="wines.html" class="btn btn-sm btn-outline">Edit</a>
                                        </div>
                                        <div class="checkout-card-body">
                                            <div class="checkout-products">
                                                <div class="checkout-product">
                                                    <div class="checkout-product-image">
                                                        <img src="https://images.unsplash.com/photo-1510812431401-41d2bd2722f3?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&h=100&q=80" alt="Château Margaux 2018">
                                                    </div>
                                                    <div class="checkout-product-details">
                                                        <h5 class="checkout-product-title">Château Margaux 2018</h5>
                                                        <p class="checkout-product-subtitle">Margaux, Bordeaux</p>
                                                        <div class="d-flex justify-content-between">
                                                            <span class="checkout-product-price">$195.00</span>
                                                            <span class="checkout-product-quantity">Qty: 1</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div class="checkout-product">
                                                    <div class="checkout-product-image">
                                                        <img src="https://images.unsplash.com/photo-1562601579-599dec564e06?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&h=100&q=80" alt="Puligny-Montrachet 2020">
                                                    </div>
                                                    <div class="checkout-product-details">
                                                        <h5 class="checkout-product-title">Puligny-Montrachet 2020</h5>
                                                        <p class="checkout-product-subtitle">Burgundy, France</p>
                                                        <div class="d-flex justify-content-between">
                                                            <span class="checkout-product-price">$72.00</span>
                                                            <span class="checkout-product-quantity">Qty: 1</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div class="checkout-product">
                                                    <div class="checkout-product-image">
                                                        <img src="https://images.unsplash.com/photo-1523986490752-c28064f26be3?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&h=100&q=80" alt="Rioja Reserva 2017">
                                                    </div>
                                                    <div class="checkout-product-details">
                                                        <h5 class="checkout-product-title">Rioja Reserva 2017</h5>
                                                        <p class="checkout-product-subtitle">Rioja, Spain</p>
                                                        <div class="d-flex justify-content-between">
                                                            <span class="checkout-product-price">$30.00</span>
                                                            <span class="checkout-product-quantity">Qty: 1</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="checkout-note mb-4">
                                    <h4 class="h5 mb-3">Add Order Notes (Optional)</h4>
                                    <textarea class="form-control" id="order-notes" rows="3" placeholder="Special instructions for delivery or gift message"></textarea>
                                </div>
                                
                                <div class="form-check mb-4">
                                    <input class="form-check-input" type="checkbox" id="terms-checkbox" required>
                                    <label class="form-check-label" for="terms-checkbox">
                                        I agree to the <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="checkout-buttons">
                                <button class="btn btn-outline-secondary" id="review-back-btn">
                                    <i class="fas fa-arrow-left me-2"></i>Back to Payment
                                </button>
                                <button class="btn btn-burgundy" id="place-order-btn">
                                    Place Order<i class="fas fa-check ms-2"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="col-lg-4">
                            <div class="checkout-summary">
                                <h3 class="h5 mb-4">Order Summary</h3>
                                
                                <div class="summary-item">
                                    <span class="summary-label">Items (3)</span>
                                    <span class="summary-value">$297.00</span>
                                </div>
                                
                                <div class="summary-item">
                                    <span class="summary-label">Shipping</span>
                                    <span class="summary-value" id="shipping-cost-review">$12.00</span>
                                </div>
                                
                                <div class="summary-item">
                                    <span class="summary-label">Tax</span>
                                    <span class="summary-value">$24.72</span>
                                </div>
                                
                                <div class="summary-item total">
                                    <span class="summary-label">Total</span>
                                    <span class="summary-value" id="order-total-review">$333.72</span>
                                </div>
                                
                                <div class="secure-checkout mt-4">
                                    <div class="secure-checkout-icons">
                                        <i class="fas fa-lock me-2"></i>
                                        <span>Secure Checkout</span>
                                    </div>
                                    <div class="payment-icons mt-2">
                                        <i class="fab fa-cc-visa"></i>
                                        <i class="fab fa-cc-mastercard"></i>
                                        <i class="fab fa-cc-amex"></i>
                                        <i class="fab fa-cc-paypal"></i>
                                        <i class="fab fa-apple-pay"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Step 4: Confirmation -->
                <div class="checkout-step-content" id="confirmation-step">
                    <div class="order-complete">
                        <div class="order-complete-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        
                        <h2 class="order-complete-title">Thank You for Your Order!</h2>
                        <p class="mb-4">Your order has been placed and is being processed.</p>
                        
                        <div class="order-details">
                            <div class="order-detail-item">
                                <span class="order-detail-label">Order Number:</span>
                                <span class="order-detail-value" id="order-number">TRR-2025-4789</span>
                            </div>
                            
                            <div class="order-detail-item">
                                <span class="order-detail-label">Order Date:</span>
                                <span class="order-detail-value" id="order-date">March 26, 2025</span>
                            </div>
                            
                            <div class="order-detail-item">
                                <span class="order-detail-label">Order Total:</span>
                                <span class="order-detail-value" id="confirmation-total">$333.72</span>
                            </div>
                            
                            <div class="order-detail-item">
                                <span class="order-detail-label">Shipping Method:</span>
                                <span class="order-detail-value" id="confirmation-shipping">Standard Shipping (3-5 business days)</span>
                            </div>
                            
                            <div class="order-detail-item">
                                <span class="order-detail-label">Estimated Delivery:</span>
                                <span class="order-detail-value" id="delivery-date">March 31 - April 2, 2025</span>
                            </div>
                        </div>
                        
                        <p class="mt-4">A confirmation email has been sent to <span id="confirmation-email">example@domain.com</span>.</p>
                        
                        <div class="mt-4">
                            <a href="account.html?tab=orders" class="btn btn-burgundy me-3">
                                <i class="fas fa-shopping-bag me-2"></i>View Order History
                            </a>
                            <a href="index.html" class="btn btn-outline">
                                <i class="fas fa-home me-2"></i>Return to Home
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Shopping Cart Modal -->
    <div class="cart-modal" id="cart-modal">
        <div class="cart-content">
            <div class="cart-header">
                <h3>Your Collection</h3>
                <button id="close-cart" class="close-cart" aria-label="Close cart">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="cart-items" id="cart-items">
                <!-- Cart items will be dynamically added here -->
                <div class="cart-item fade-in">
                    <div class="cart-item-image">
                        <img src="https://images.unsplash.com/photo-1510812431401-41d2bd2722f3?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&h=100&q=80" alt="Château Margaux 2018">
                    </div>
                    <div class="cart-item-details">
                        <h4 class="cart-item-title">Château Margaux 2018</h4>
                        <p class="cart-item-variant">Cabernet Blend - Bordeaux</p>
                        <p class="cart-item-price">$195.00</p>
                        <div class="cart-item-quantity">
                            <button class="quantity-btn minus">-</button>
                            <input type="number" class="quantity-input" value="1" min="1" max="99">
                            <button class="quantity-btn plus">+</button>
                        </div>
                    </div>
                    <div class="cart-item-remove">
                        <i class="fas fa-times"></i>
                    </div>
                </div>
                
                <div class="cart-item fade-in">
                    <div class="cart-item-image">
                        <img src="https://images.unsplash.com/photo-1562601579-599dec564e06?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&h=100&q=80" alt="Puligny-Montrachet 2020">
                    </div>
                    <div class="cart-item-details">
                        <h4 class="cart-item-title">Puligny-Montrachet 2020</h4>
                        <p class="cart-item-variant">Chardonnay - Burgundy</p>
                        <p class="cart-item-price">$72.00</p>
                        <div class="cart-item-quantity">
                            <button class="quantity-btn minus">-</button>
                            <input type="number" class="quantity-input" value="1" min="1" max="99">
                            <button class="quantity-btn plus">+</button>
                        </div>
                    </div>
                    <div class="cart-item-remove">
                        <i class="fas fa-times"></i>
                    </div>
                </div>
                
                <div class="cart-item fade-in">
                    <div class="cart-item-image">
                        <img src="https://images.unsplash.com/photo-1523986490752-c28064f26be3?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&h=100&q=80" alt="Rioja Reserva 2017">
                    </div>
                    <div class="cart-item-details">
                        <h4 class="cart-item-title">Rioja Reserva 2017</h4>
                        <p class="cart-item-variant">Tempranillo - Rioja</p>
                        <p class="cart-item-price">$30.00</p>
                        <div class="cart-item-quantity">
                            <button class="quantity-btn minus">-</button>
                            <input type="number" class="quantity-input" value="1" min="1" max="99">
                            <button class="quantity-btn plus">+</button>
                        </div>
                    </div>
                    <div class="cart-item-remove">
                        <i class="fas fa-times"></i>
                    </div>
                </div>
            </div>
            <div class="cart-footer">
                <div class="cart-total">
                    <span>Total:</span>
                    <span id="cart-total">$297.00</span>
                </div>
                <button id="checkout-btn" class="btn btn-checkout">
                    <i class="fas fa-credit-card me-2"></i>Proceed to Checkout
                </button>
            </div>
        </div>
    </div>

    <!-- Modern Footer -->
    <footer class="site-footer">
        <div class="container">
            <div class="footer-top">
                <div class="row">
                    <div class="col-lg-4 mb-5 mb-lg-0">
                        <div class="footer-brand">
                            <h3>Terroir</h3>
                            <p>An exclusive collection of fine wines from La Cité Du Vin, celebrating the art and culture of wine appreciation.</p>
                        </div>
                        <div class="social-icons">
                            <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                            <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                            <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                            <a href="#" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-6 mb-5 mb-md-0">
                        <h5>Explore</h5>
                        <ul class="footer-links">
                            <li><a href="index.html">Wine Map</a></li>
                            <li><a href="wines.html">Collection</a></li>
                            <li><a href="sommelier.html">Sommelier</a></li>
                            <li><a href="knowledge.html">Wine Education</a></li>
                        </ul>
                    </div>
                    <div class="col-lg-2 col-md-6 mb-5 mb-md-0">
                        <h5>Visit Us</h5>
                        <address class="footer-address">
                            La Cité du Vin<br>
                            134 Quai de Bacalan<br>
                            33300 Bordeaux<br>
                            France
                        </address>
                    </div>
                    <div class="col-lg-4">
                        <h5>Stay Updated</h5>
                        <p>Subscribe for exclusive offers and wine release notifications.</p>
                        <form class="footer-form">
                            <div class="input-with-button">
                                <input type="email" placeholder="Your email address" required aria-label="Subscribe to newsletter">
                                <button type="submit" aria-label="Submit subscription">
                                    <i class="fas fa-arrow-right"></i>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <div class="row align-items-center">
                    <div class="col-md-6 mb-3 mb-md-0">
                        <p class="copyright">© 2025 La Cité Du Vin. All rights reserved.</p>
                    </div>
                    <div class="col-md-6 text-md-end">
                        <div class="footer-meta-links">
                            <a href="#">Privacy Policy</a>
                            <a href="#">Terms of Service</a>
                            <a href="#">Cookie Policy</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- JavaScript Dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom Scripts -->
    <script src="js/ui-components.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get elements
            const shippingStep = document.getElementById('shipping-step');
            const paymentStep = document.getElementById('payment-step');
            const reviewStep = document.getElementById('review-step');
            const confirmationStep = document.getElementById('confirmation-step');
            
            const shippingNextBtn = document.getElementById('shipping-next-btn');
            const paymentBackBtn = document.getElementById('payment-back-btn');
            const paymentNextBtn = document.getElementById('payment-next-btn');
            const reviewBackBtn = document.getElementById('review-back-btn');
            const placeOrderBtn = document.getElementById('place-order-btn');
            
            const checkoutSteps = document.querySelectorAll('.checkout-step');
            
            // Navigation functions
            function goToStep(step) {
                // Hide all steps
                document.querySelectorAll('.checkout-step-content').forEach(content => {
                    content.classList.remove('active');
                });
                
                // Show target step
                document.getElementById(step + '-step').classList.add('active');
                
                // Update progress indicator
                checkoutSteps.forEach(s => {
                    s.classList.remove('active', 'completed');
                });
                
                const targetIndex = Array.from(checkoutSteps).findIndex(s => s.dataset.step === step);
                
                // Mark all previous steps as completed
                for (let i = 0; i < targetIndex; i++) {
                    checkoutSteps[i].classList.add('completed');
                }
                
                // Mark current step as active
                checkoutSteps[targetIndex].classList.add('active');
                
                // Scroll to top
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
            
            // Event Listeners for Navigation
            if (shippingNextBtn) {
                shippingNextBtn.addEventListener('click', () => goToStep('payment'));
            }
            
            if (paymentBackBtn) {
                paymentBackBtn.addEventListener('click', () => goToStep('shipping'));
            }
            
            if (paymentNextBtn) {
                paymentNextBtn.addEventListener('click', () => {
                    // Validate payment form
                    const paymentMethod = document.querySelector('.payment-option.selected').dataset.payment;
                    
                    if (paymentMethod === 'card') {
                        const cardNumber = document.getElementById('card-number').value;
                        const cardName = document.getElementById('card-name').value;
                        const expiry = document.getElementById('expiry-date').value;
                        const cvv = document.getElementById('cvv').value;
                        
                        if (!cardNumber || !cardName || !expiry || !cvv) {
                            showToast('Please fill in all credit card details', 'error');
                            return;
                        }
                        
                        // Update review page with card info
                        document.getElementById('review-payment-method').innerHTML = `
                            <strong>Payment Method:</strong> Credit Card<br>
                            <span id="card-display">**** **** **** ${cardNumber.slice(-4)}</span><br>
                            <span id="card-name-display">${cardName}</span>
                        `;
                    } else if (paymentMethod === 'paypal') {
                        document.getElementById('review-payment-method').innerHTML = `
                            <strong>Payment Method:</strong> PayPal<br>
                            <i class="fab fa-paypal me-2"></i>Pay with PayPal
                        `;
                    } else if (paymentMethod === 'applepay') {
                        document.getElementById('review-payment-method').innerHTML = `
                            <strong>Payment Method:</strong> Apple Pay<br>
                            <i class="fab fa-apple-pay me-2"></i>Pay with Apple Pay
                        `;
                    }
                    
                    // Get billing address info
                    const sameAddress = document.getElementById('same-address').checked;
                    document.getElementById('review-billing-address').innerHTML = `
                        <strong>Billing Address:</strong> ${sameAddress ? 'Same as shipping address' : 'Different billing address'}
                    `;
                    
                    goToStep('review');
                });
            }
            
            if (reviewBackBtn) {
                reviewBackBtn.addEventListener('click', () => goToStep('payment'));
            }
            
            if (placeOrderBtn) {
                placeOrderBtn.addEventListener('click', () => {
                    // Validate terms checkbox
                    const termsCheckbox = document.getElementById('terms-checkbox');
                    if (!termsCheckbox.checked) {
                        showToast('Please agree to the Terms of Service and Privacy Policy', 'error');
                        return;
                    }
                    
                    // Show loading state
                    placeOrderBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Processing...';
                    placeOrderBtn.disabled = true;
                    
                    // Generate current date
                    const now = new Date();
                    const formattedDate = now.toLocaleDateString('en-US', { 
                        year: 'numeric', 
                        month: 'long', 
                        day: 'numeric' 
                    });
                    
                    // Get stored user info or use placeholder
                    let userEmail = 'example@domain.com';
                    try {
                        const storedUser = localStorage.getItem('terroir_user');
                        if (storedUser) {
                            const user = JSON.parse(storedUser);
                            userEmail = user.email || userEmail;
                        }
                    } catch (e) {
                        console.error('Error parsing user data:', e);
                    }
                    
                    // Update confirmation page
                    document.getElementById('order-date').textContent = formattedDate;
                    document.getElementById('confirmation-email').textContent = userEmail;
                    
                    // Generate delivery date estimate (5-7 days from now)
                    const deliveryStart = new Date(now);
                    deliveryStart.setDate(deliveryStart.getDate() + 5);
                    const deliveryEnd = new Date(now);
                    deliveryEnd.setDate(deliveryEnd.getDate() + 7);
                    
                    const formatDeliveryDate = (date) => {
                        return date.toLocaleDateString('en-US', {
                            month: 'long',
                            day: 'numeric'
                        });
                    };
                    
                    document.getElementById('delivery-date').textContent = 
                        `${formatDeliveryDate(deliveryStart)} - ${formatDeliveryDate(deliveryEnd)}, ${deliveryEnd.getFullYear()}`;
                    
                    // Simulate API call delay
                    setTimeout(() => {
                        // Reset cart count
                        document.getElementById('cart-count').textContent = '0';
                        
                        // In a real app, this would be from the server
                        document.getElementById('order-number').textContent = 'TRR-2025-' + Math.floor(1000 + Math.random() * 9000);
                        
                        goToStep('confirmation');
                    }, 2000);
                });
            }
            
            // Payment method selection
            document.querySelectorAll('.payment-option').forEach(option => {
                option.addEventListener('click', function() {
                    // Remove selected class from all options
                    document.querySelectorAll('.payment-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    
                    // Add selected class to clicked option
                    this.classList.add('selected');
                    
                    // Show/hide appropriate payment form
                    const paymentMethod = this.dataset.payment;
                    
                    document.getElementById('card-payment-form').classList.add('d-none');
                    document.getElementById('paypal-payment-form').classList.add('d-none');
                    document.getElementById('applepay-payment-form').classList.add('d-none');
                    
                    document.getElementById(`${paymentMethod}-payment-form`).classList.remove('d-none');
                });
            });
            
            // Same billing address toggle
            document.getElementById('same-address').addEventListener('change', function() {
                document.getElementById('different-billing-address').classList.toggle('d-none', this.checked);
            });
            
            // Address card selection
            document.querySelectorAll('.address-card').forEach(card => {
                card.addEventListener('click', function() {
                    // Remove selected class from all cards
                    document.querySelectorAll('.address-card').forEach(c => {
                        c.classList.remove('selected');
                    });
                    
                    // Add selected class to clicked card
                    this.classList.add('selected');
                    
                    // Update review shipping address
                    const addressContent = this.querySelector('.address-card-content').innerHTML;
                    document.getElementById('review-shipping-address').innerHTML = addressContent;
                });
            });
            
            // Shipping method selection and price update
            document.querySelectorAll('input[name="shipping-method"]').forEach(input => {
                input.addEventListener('change', function() {
                    const shippingMethod = this.id;
                    let shippingCost = '0.00';
                    let methodText = '';
                    
                    if (shippingMethod === 'standard-shipping') {
                        shippingCost = '12.00';
                        methodText = 'Standard Shipping (3-5 business days)';
                    } else if (shippingMethod === 'express-shipping') {
                        shippingCost = '24.00';
                        methodText = 'Express Shipping (1-2 business days)';
                    } else if (shippingMethod === 'pickup') {
                        shippingCost = '0.00';
                        methodText = 'Store Pickup at La Cité Du Vin';
                    }
                    
                    // Update shipping cost display
                    document.getElementById('shipping-cost').textContent = `$${shippingCost}`;
                    document.getElementById('shipping-cost-payment').textContent = `$${shippingCost}`;
                    document.getElementById('shipping-cost-review').textContent = `$${shippingCost}`;
                    
                    // Update shipping method text for review page
                    document.getElementById('review-shipping-method').innerHTML = `
                        <strong>Shipping Method:</strong> ${methodText}
                    `;
                    
                    // Update order totals
                    const itemsSubtotal = 297.00;
                    const taxAmount = 24.72;
                    const total = itemsSubtotal + parseFloat(shippingCost) + taxAmount;
                    
                    document.getElementById('order-total').textContent = `$${total.toFixed(2)}`;
                    document.getElementById('order-total-payment').textContent = `$${total.toFixed(2)}`;
                    document.getElementById('order-total-review').textContent = `$${total.toFixed(2)}`;
                    document.getElementById('confirmation-total').textContent = `$${total.toFixed(2)}`;
                    document.getElementById('confirmation-shipping').textContent = methodText;
                });
            });
            
            // Edit buttons in review step
            document.querySelectorAll('[data-edit]').forEach(button => {
                button.addEventListener('click', function() {
                    const section = this.dataset.edit;
                    goToStep(section);
                });
            });
            
            // Form validation for card fields
            const cardNumber = document.getElementById('card-number');
            const expiryDate = document.getElementById('expiry-date');
            const cvv = document.getElementById('cvv');
            
            // Format card number with spaces
            if (cardNumber) {
                cardNumber.addEventListener('input', function(e) {
                    let value = this.value.replace(/\D/g, '');
                    
                    // Add spaces after every 4 digits
                    if (value.length > 4) {
                        value = value.match(/.{1,4}/g).join(' ');
                    }
                    
                    this.value = value;
                });
            }
            
            // Format expiry date with slash
            if (expiryDate) {
                expiryDate.addEventListener('input', function(e) {
                    let value = this.value.replace(/\D/g, '');
                    
                    if (value.length > 2) {
                        value = value.slice(0, 2) + '/' + value.slice(2, 4);
                    }
                    
                    this.value = value;
                });
            }
            
            // Limit CVV to 3-4 digits
            if (cvv) {
                cvv.addEventListener('input', function(e) {
                    this.value = this.value.replace(/\D/g, '').slice(0, 4);
                });
            }
            
            // Check authentication
            const userJson = localStorage.getItem('terroir_user');
            if (userJson) {
                try {
                    const user = JSON.parse(userJson);
                    // Update email in confirmation page
                    if (user.email) {
                        document.getElementById('confirmation-email').textContent = user.email;
                    }
                } catch (e) {
                    console.error('Error parsing user data:', e);
                }
            }
            
            // Cart interaction (simplified)
            document.getElementById('close-cart').addEventListener('click', function() {
                document.getElementById('cart-modal').classList.remove('active');
                document.getElementById('modal-overlay').classList.remove('active');
            });
            
            document.getElementById('cart-icon').addEventListener('click', function() {
                document.getElementById('cart-modal').classList.add('active');
                document.getElementById('modal-overlay').classList.add('active');
            });
            
            document.getElementById('modal-overlay').addEventListener('click', function() {
                document.getElementById('cart-modal').classList.remove('active');
                this.classList.remove('active');
            });
            
            document.querySelectorAll('.cart-item-remove').forEach(btn => {
                btn.addEventListener('click', function() {
                    const cartItem = this.closest('.cart-item');
                    cartItem.style.opacity = '0';
                    setTimeout(() => {
                        cartItem.remove();
                        
                        // Update cart count
                        const cartCount = document.getElementById('cart-count');
                        cartCount.textContent = Math.max(0, parseInt(cartCount.textContent) - 1);
                        
                        // If cart is empty, show empty message
                        if (parseInt(cartCount.textContent) === 0) {
                            document.getElementById('cart-items').innerHTML = '<p class="empty-cart-message">Your collection is empty</p>';
                            document.getElementById('cart-total').textContent = '$0.00';
                            document.getElementById('checkout-btn').disabled = true;
                        }
                    }, 300);
                });
            });
            
            // Quantity buttons in cart
            document.querySelectorAll('.quantity-btn.minus').forEach(btn => {
                btn.addEventListener('click', function() {
                    const input = this.nextElementSibling;
                    const currentVal = parseInt(input.value);
                    if (currentVal > 1) {
                        input.value = currentVal - 1;
                    }
                });
            });
            
            document.querySelectorAll('.quantity-btn.plus').forEach(btn => {
                btn.addEventListener('click', function() {
                    const input = this.previousElementSibling;
                    const currentVal = parseInt(input.value);
                    if (currentVal < 99) {
                        input.value = currentVal + 1;
                    }
                });
            });
            
            // New address button
            document.getElementById('new-address-btn').addEventListener('click', function() {
                showToast('Address functionality will be implemented soon', 'info');
            });
        });
    </script>
</body>
</html>